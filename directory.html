<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha Iota Chapter - Brothers Directory</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&amp;family=Darker+Grotesque:wght@300;600;800&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --color-background: #F5F5DC;
            --color-crimson: #B01030;
            --color-black: #0a0a0a;
            --color-text: #222222;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Darker Grotesque', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
        }
        
        /* Mobile menu toggle styling */
        .mobile-menu-toggle {
            background: none;
            border: none;
            color: #FFFFFF;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 1000;
            padding: 0.8rem 0;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(176, 16, 48, 0.1);
        }
        
        .nav-black {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #000000;
            z-index: 999; /* Lower than transparent nav */
            padding: 0.8rem 0;
            border-bottom: 1px solid var(--color-crimson);
        }
        
        /* Show black navbar when scrolling */
        @media (min-height: 1px) {
            .nav {
                background-color: transparent;
                visibility: visible;
            }
            
            .nav-black {
                visibility: hidden;
            }
        }
        
        /* Hide transparent navbar when scrolled */
        @media (min-height: 1px) {
            body.scrolled .nav {
                visibility: hidden;
            }
            
            body.scrolled .nav-black {
                visibility: visible;
                z-index: 1001; /* Higher than transparent nav when visible */
            }
        }
        
        .nav-inner {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            width: 90%;
            padding: 0.5rem 0;
        }
        
        .logo {
            text-decoration: none;
            color: #FFFFFF;
            font-family: 'Syncopate', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 1rem;
        }
        
        .menu {
            display: flex;
            gap: 2rem;
            justify-content: center;
        }
        
        .menu-link {
            text-decoration: none;
            color: #FFFFFF;
            font-family: 'Syncopate', sans-serif;
            text-transform: uppercase;
            transition: var(--transition);
            font-size: 0.9rem;
            position: relative;
            padding-bottom: 4px;
            transition: color 0.3s ease;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .menu-link:hover {
            color: var(--color-crimson);
        }
        
        .menu-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--color-crimson);
            transition: width 0.3s ease;
        }
        
        .menu-link:hover:after {
            width: 100%;
        }
        

        
        /* Main Content */
        .directory-container {
            max-width: 1200px;
            margin: 120px auto 50px;
            padding: 0 2rem;
        }
        
        .page-title {
            font-family: 'Syncopate', sans-serif;
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            color: var(--color-crimson);
            margin-bottom: 2rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        /* Enhanced Search Section */
        .search-filter-section {
            max-width: 800px;
            margin: 0 auto 3rem auto;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            border-radius: 10px;
            padding: 2rem;
            border: 1px solid var(--color-crimson);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .search-section-title {
            font-family: 'Syncopate', sans-serif;
            color: var(--color-crimson);
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            text-transform: uppercase;
        }
        
        .search-bar {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-crimson);
            font-size: 1.1rem;
            z-index: 1;
        }
        
        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            background-color: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: white;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--color-crimson);
            background-color: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(176, 16, 48, 0.2);
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .quick-search-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .quick-search-btn {
            background-color: rgba(176, 16, 48, 0.2);
            border: 1px solid var(--color-crimson);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quick-search-btn:hover {
            background-color: var(--color-crimson);
            transform: translateY(-2px);
        }
        
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .filter-select {
            padding: 0.8rem 1rem;
            background-color: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: white;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--color-crimson);
            background-color: rgba(255, 255, 255, 0.12);
        }
        
        .filter-select option {
            background-color: #333;
            color: white;
        }
        
        .results-info {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .clear-filters-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            font-family: 'Syncopate', sans-serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin: 0 auto;
            display: block;
        }
        
        .clear-filters-btn:hover {
            background-color: var(--color-crimson);
            border-color: var(--color-crimson);
        }
        
        /* Brothers List View */
        .brothers-list {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            border: 1px solid var(--color-crimson);
            overflow: hidden;
        }
        
        .brother-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .brother-item:last-child {
            border-bottom: none;
        }
        
        .brother-item:hover {
            background-color: rgba(176, 16, 48, 0.1);
        }
        
        .brother-summary {
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .brother-basic-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .brother-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--color-crimson);
            margin-right: 1rem;
        }
        
        .brother-default-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--color-crimson);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Syncopate', sans-serif;
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 1rem;
        }
        
        .brother-name-profession {
            flex: 1;
        }
        
        .brother-name {
            font-family: 'Syncopate', sans-serif;
            font-size: 1.1rem;
            color: white;
            margin-bottom: 0.25rem;
            font-weight: 700;
        }
        
        .brother-quick-info {
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .brother-location-info {
            text-align: right;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-right: 1rem;
        }
        
        .expand-icon {
            color: var(--color-crimson);
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .brother-item.expanded .expand-icon {
            transform: rotate(180deg);
        }
        
        .brother-details {
            display: none;
            padding: 0 1.5rem 1.5rem;
            background-color: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .brother-item.expanded .brother-details {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 500px;
            }
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .detail-item {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.8rem;
            border-radius: 5px;
            border-left: 3px solid var(--color-crimson);
        }
        
        .detail-label {
            font-family: 'Syncopate', sans-serif;
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            margin-bottom: 0.25rem;
            letter-spacing: 0.5px;
        }
        
        .detail-value {
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
            color: white;
            word-break: break-word;
        }
        
        .bio-section {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 5px;
            margin-top: 1rem;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .social-link {
            color: var(--color-crimson);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            color: white;
            transform: translateY(-2px);
        }
        
        /* Alphabet Navigation */
        .alphabet-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }
        
        .alphabet-letter {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            cursor: pointer;
            font-family: 'Syncopate', sans-serif;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .alphabet-letter:hover,
        .alphabet-letter.active {
            background-color: var(--color-crimson);
            border-color: var(--color-crimson);
            transform: scale(1.1);
        }
        
        /* Auth Components */
        .auth-container {
            max-width: 600px;
            margin: 0 auto 3rem auto;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 2rem;
            border: 1px solid var(--color-crimson);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .auth-container h2 {
            font-family: 'Syncopate', sans-serif;
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            text-transform: uppercase;
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1.5rem;
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 1rem;
            font-family: 'Syncopate', sans-serif;
            font-size: 1rem;
            color: white;
            cursor: pointer;
            background: transparent;
            border: none;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .auth-tab.active {
            color: var(--color-crimson);
            border-bottom: 3px solid var(--color-crimson);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .auth-input {
            width: 100%;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            color: white;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: var(--color-crimson);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .auth-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .auth-button {
            width: 100%;
            padding: 1rem;
            background-color: var(--color-crimson);
            color: white;
            border: none;
            border-radius: 5px;
            font-family: 'Syncopate', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .auth-button:hover {
            background-color: #8B0000;
        }
        
        .logged-in-status {
            display: none;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--color-crimson);
            border-radius: 5px;
            padding: 0.8rem 1.5rem;
            margin-bottom: 2rem;
            color: white;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .logged-in-status i {
            color: var(--color-crimson);
            margin-right: 0.5rem;
        }
        
        .user-actions {
            display: flex;
            gap: 0.5rem;
            margin-left: auto;
        }
        
        .logout-button, .edit-profile-button {
            background-color: var(--color-crimson);
            color: white;
            padding: 0.3rem 0.8rem;
            border: none;
            border-radius: 3px;
            font-family: 'Syncopate', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }
        
        .edit-profile-button {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .logout-button:hover, .edit-profile-button:hover {
            background-color: #8B0000;
            transform: translateY(-1px);
        }
        
        .edit-profile-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* Profile Edit Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 1rem;
        }
        
        .modal {
            background-color: rgba(0, 0, 0, 0.9);
            border: 1px solid var(--color-crimson);
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--color-crimson);
        }
        
        .modal-title {
            font-family: 'Syncopate', sans-serif;
            font-size: 1.5rem;
            color: var(--color-crimson);
            margin-bottom: 1.5rem;
            text-align: center;
            text-transform: uppercase;
        }
        
        .form-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .form-section:last-child {
            border-bottom: none;
        }
        
        .section-title {
            font-family: 'Syncopate', sans-serif;
            font-size: 1rem;
            color: var(--color-crimson);
            margin-bottom: 1rem;
            text-transform: uppercase;
        }
        
        /* Chapter Password Protection */
        .chapter-protection {
            max-width: 500px;
            margin: 150px auto 3rem auto;
            background-color: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            padding: 2rem;
            border: 1px solid var(--color-crimson);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .chapter-protection h2 {
            font-family: 'Syncopate', sans-serif;
            color: var(--color-crimson);
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            text-transform: uppercase;
        }
        
        .chapter-protection .subtitle {
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin-bottom: 2rem;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
        }
        
        .chapter-password-input {
            width: 100%;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            color: white;
            font-family: 'Darker Grotesque', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .chapter-password-input:focus {
            outline: none;
            border-color: var(--color-crimson);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .chapter-password-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .chapter-access-button {
            width: 100%;
            padding: 1rem;
            background-color: var(--color-crimson);
            color: white;
            border: none;
            border-radius: 5px;
            font-family: 'Syncopate', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .chapter-access-button:hover {
            background-color: #8B0000;
        }
        
        .chapter-error {
            color: #ff6b6b;
            background-color: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            text-align: center;
            display: none;
        }
        
        .error-message, .success-message {
            margin-bottom: 15px;
            text-align: center;
            display: none;
            padding: 15px;
            border-radius: 5px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .error-message {
            color: #ff6b6b;
            background-color: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .success-message {
            color: #4caf50;
            background-color: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* Mobile header with logo */
        .mobile-header {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1rem 1.5rem;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 1000;
            border-bottom: 1px solid rgba(176, 16, 48, 0.1);
        }
        
        .mobile-logo {
            text-decoration: none;
            color: #FFFFFF;
            font-family: 'Syncopate', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: left;
            display: block;
        }
        
        /* Responsive Design */
        @media screen and (max-width: 768px) {
            .nav {
                display: none;
            }
            
            .nav-black {
                display: none;
            }
            
            .mobile-header {
                display: block;
            }
            
            .directory-container {
                margin-top: 80px;
            }
            
            .page-title {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
                line-height: 1.2;
            }
            
            .directory-container {
                padding: 0 1rem;
                margin-top: 100px;
            }
            
            .search-filter-section {
                padding: 1rem;
                margin: 0 0 2rem 0;
                width: 100%;
            }
            
            .search-section-title {
                font-size: 1rem;
                margin-bottom: 1rem;
            }
            
            .search-input {
                font-size: 0.9rem;
                padding: 0.8rem 0.8rem 0.8rem 2.5rem;
            }
            
            .filters {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }
            
            .filter-select {
                font-size: 0.9rem;
                padding: 0.7rem;
            }
            
            .quick-search-buttons {
                justify-content: flex-start;
                gap: 0.3rem;
            }
            
            .quick-search-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
            
            .brother-summary {
                padding: 0.8rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .brother-basic-info {
                width: 100%;
            }
            
            .brother-name {
                font-size: 1rem;
            }
            
            .brother-quick-info {
                font-size: 0.85rem;
            }
            
            .brother-location-info {
                text-align: left;
                margin-right: 0;
                font-size: 0.8rem;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }
            
            .detail-item {
                padding: 0.6rem;
            }
            
            .detail-label {
                font-size: 0.65rem;
            }
            
            .detail-value {
                font-size: 0.9rem;
            }
            
            .alphabet-nav {
                gap: 0.25rem;
                padding: 0.8rem;
            }
            
            .alphabet-letter {
                width: 32px;
                height: 32px;
                font-size: 0.8rem;
            }
            
            .logged-in-status {
                padding: 0.6rem 1rem;
                flex-direction: column;
                text-align: center;
                gap: 0.8rem;
            }
            
            .user-actions {
                margin-left: 0;
                justify-content: center;
            }
            
            .edit-profile-button, .logout-button {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
            }
            
            .auth-container {
                padding: 1.5rem;
                margin: 0 0 2rem 0;
                width: 100%;
            }
            
            .auth-container h2 {
                font-size: 1.4rem;
                margin-bottom: 1.2rem;
            }
            
            .auth-tab {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
            
            .auth-input {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
            
            .auth-button {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
            
            .modal {
                width: 95%;
                padding: 1.5rem;
                margin: 0;
            }
            
            .modal-title {
                font-size: 1.2rem;
                margin-bottom: 1.2rem;
            }
            
            .section-title {
                font-size: 0.9rem;
                margin-bottom: 0.8rem;
            }
        }
        
        /* Extra small mobile devices */
        @media screen and (max-width: 480px) {
            .nav-inner {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem 0;
            }
            
            .menu {
                justify-content: center;
                gap: 0.5rem;
            }
            
            .menu-link {
                font-size: 0.65rem;
                padding: 0.25rem 0.5rem;
            }
            
            .page-title {
                font-size: 1.5rem;
                text-align: center;
            }
            
            .directory-container {
                margin-top: 120px;
                padding: 0 0.5rem;
            }
            
            .search-section-title {
                font-size: 0.9rem;
            }
            
            .brother-name {
                font-size: 0.95rem;
            }
            
            .brother-quick-info, .brother-location-info {
                font-size: 0.8rem;
            }
            
            .alphabet-letter {
                width: 28px;
                height: 28px;
                font-size: 0.75rem;
            }
            
            .quick-search-btn {
                font-size: 0.75rem;
                padding: 0.3rem 0.6rem;
            }
        }
    </style>
<script src="https://lib.youware.com/youware-lib.1747145198.js" id="yourware-lib"></script><script id="simplify-jobs-page-script" src="chrome-extension://pbanhockgagggenencehbnadejlgchfc/js/pageScript.bundle.js"></script></head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="index.html" class="logo">ALPHA IOTA</a>
            <div class="menu">
                <a href="index.html" class="menu-link">HOME</a>
                <a href="about.html" class="menu-link">ABOUT</a>
                <a href="brothers.html" class="menu-link">LINEAGE</a>
                <a href="directory.html" class="menu-link">DIRECTORY</a>
                <a href="gallery.html" class="menu-link">GALLERY</a>
            </div>
        </div>
    </nav>
    
    <!-- Navigation - Black -->
    <nav class="nav-black">
        <div class="nav-inner">
            <a href="index.html" class="logo">ALPHA IOTA</a>
            <div class="menu">
                <a href="index.html" class="menu-link">HOME</a>
                <a href="about.html" class="menu-link">ABOUT</a>
                <a href="brothers.html" class="menu-link">LINEAGE</a>
                <a href="directory.html" class="menu-link">DIRECTORY</a>
                <a href="gallery.html" class="menu-link">GALLERY</a>
            </div>
        </div>
    </nav>
    
    <!-- Mobile Header with Logo -->
    <div class="mobile-header">
        <a href="index.html" class="mobile-logo">ALPHA IOTA</a>
    </div>
    

    
    <!-- Chapter Password Protection -->
    <div id="chapterProtection" class="chapter-protection">
        <h2>Alpha Iota Chapter</h2>
        <p class="subtitle">Enter chapter password to access the brothers directory</p>
        <div id="chapterError" class="chapter-error">Incorrect password. Please try again.</div>
        <input type="password" id="chapterPasswordInput" class="chapter-password-input" placeholder="Enter chapter password..." maxlength="50">
        <button id="chapterAccessBtn" class="chapter-access-button" onclick="verifyChapterPassword()">Access Directory</button>
    </div>

    <!-- Main Directory Content (hidden initially) -->
    <div id="directoryContent" style="display: none;">
        <!-- Main Content -->
        <main class="directory-container">
            <h1 class="page-title">Alpha Iota Chapter Brothers Directory</h1>

            <!-- Logged In Status -->
            <div class="logged-in-status" id="logged-in-status">
                <i class="fas fa-user-check"></i>
                <span>Logged in as <span id="user-name"></span></span>
                <div class="user-actions">
                    <button class="edit-profile-button" id="edit-profile-button">Edit Profile</button>
                    <button class="logout-button" id="logout-button">Logout</button>
                </div>
            </div>

            <!-- Authentication Container -->
            <div class="auth-container" id="auth-container">
            <h2>Brothers Authentication</h2>
            
            <div class="auth-tabs">
                <button class="auth-tab active" id="login-tab">Login</button>
                <button class="auth-tab" id="signup-tab">Sign Up</button>
            </div>
            
            <!-- Login Tab -->
            <div class="tab-content active" id="login-content">
                <form id="login-form">
                    <input type="email" class="auth-input" id="login-email" placeholder="Email Address" required="">
                    <input type="password" class="auth-input" id="login-password" placeholder="Password" required="">
                    <div id="login-error" class="error-message"></div>
                    <div id="login-success" class="success-message"></div>
                    <div style="margin-bottom: 15px; font-size: 0.9rem; color: rgba(255, 255, 255, 0.7); text-align: center;">
                        <i class="fas fa-info-circle"></i> 
                        If you're a new user, please sign up first using the Sign Up tab.
                    </div>
                    <button type="submit" class="auth-button">Login</button>
                    <p style="text-align: center; margin-top: 15px; font-size: 0.85rem; color: rgba(255, 255, 255, 0.6);">
                        Having trouble? Make sure you've registered and are using the correct email.
                    </p>
                </form>
            </div>
            
            <!-- Sign Up Tab -->
            <div class="tab-content" id="signup-content">
                <form id="signup-form">
                    <input type="text" class="auth-input" id="signup-name" placeholder="Full Name" required="">
                    <input type="email" class="auth-input" id="signup-email" placeholder="Email Address" required="">
                    <input type="tel" class="auth-input" id="signup-phone" placeholder="Phone Number">
                    <input type="text" class="auth-input" id="signup-birthplace" placeholder="Birthplace (City, State)">
                    <input type="text" class="auth-input" id="signup-current-city" placeholder="Current City">
                    <input type="text" class="auth-input" id="signup-current-state" placeholder="Current State">
                    
                    <select class="auth-input" id="signup-education-status" required="">
                        <option value="" disabled="" selected="">Select Education Status</option>
                        <option value="undergraduate">Undergraduate</option>
                        <option value="graduate">Graduate School</option>
                        <option value="graduated">Graduated</option>
                    </select>
                    
                    <input type="text" class="auth-input" id="signup-profession" placeholder="Profession">
                    <input type="text" class="auth-input" id="signup-field" placeholder="Field of Interest">
                    <input type="text" class="auth-input" id="signup-role" placeholder="Job Title/Role">
                    
                    <input type="password" class="auth-input" id="signup-password" placeholder="Create Password" required="">
                    <input type="password" class="auth-input" id="signup-password-confirm" placeholder="Confirm Password" required="">
                    
                    <div id="signup-error" class="error-message"></div>
                    <div id="signup-success" class="success-message"></div>
                    <button type="submit" class="auth-button">Complete Sign Up</button>
                </form>
            </div>
        </div>

        <!-- Enhanced Search and Filter Section -->
        <div class="search-filter-section" id="search-filter-section" style="display: none;">
            <h3 class="search-section-title">Find Brothers by Profession, Location, or Name</h3>
            
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="Search by name, profession, city, state, or field..." class="search-input">
            </div>
            
            <div class="quick-search-buttons">
                <button class="quick-search-btn" onclick="quickSearch('Engineer')">Engineers</button>
                <button class="quick-search-btn" onclick="quickSearch('Doctor')">Doctors</button>
                <button class="quick-search-btn" onclick="quickSearch('Lawyer')">Lawyers</button>
                <button class="quick-search-btn" onclick="quickSearch('Teacher')">Teachers</button>
                <button class="quick-search-btn" onclick="quickSearch('Business')">Business</button>
                <button class="quick-search-btn" onclick="quickSearch('Technology')">Technology</button>
                <button class="quick-search-btn" onclick="quickSearch('Atlanta')">Atlanta</button>
                <button class="quick-search-btn" onclick="quickSearch('New York')">New York</button>
                <button class="quick-search-btn" onclick="quickSearch('California')">California</button>
            </div>
            
            <div class="filters">
                <select id="education-filter" class="filter-select">
                    <option value="">All Education Status</option>
                    <option value="undergraduate">Undergraduate</option>
                    <option value="graduate">Graduate School</option>
                    <option value="graduated">Graduated</option>
                </select>
                
                <select id="field-filter" class="filter-select">
                    <option value="">All Fields</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Business">Business</option>
                    <option value="Technology">Technology</option>
                    <option value="Education">Education</option>
                    <option value="Law">Law</option>
                </select>
                
                <select id="state-filter" class="filter-select">
                    <option value="">All States</option>
                    <option value="Georgia">Georgia</option>
                    <option value="New York">New York</option>
                    <option value="California">California</option>
                    <option value="Texas">Texas</option>
                    <option value="Florida">Florida</option>
                </select>
            </div>
            
            <div class="results-info">
                <span id="results-count">0 brothers found</span>
            </div>
            
            <button id="clear-filters" class="clear-filters-btn">
                <i class="fas fa-times"></i> Clear All Filters
            </button>
        </div>

        <!-- Alphabet Navigation -->
        <div class="alphabet-nav" id="alphabet-nav" style="display: none;">
            <!-- Letters A-Z will be generated by JavaScript -->
        </div>

        <!-- Brothers List View -->
        <div class="brothers-list" id="brothers-list" style="display: none;">
            <!-- Brother items will be dynamically generated -->
        </div>
        </main>
    </div>
    
    <!-- Profile Edit Modal -->
    <div class="modal-overlay" id="edit-profile-modal">
        <div class="modal">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Edit Your Profile</h2>
            <form id="edit-profile-form">
                <div class="form-section">
                    <h3 class="section-title">Personal Information</h3>
                    <input type="text" class="auth-input" id="edit-name" placeholder="Full Name" required="">
                    <input type="tel" class="auth-input" id="edit-phone" placeholder="Phone Number">
                    <input type="text" class="auth-input" id="edit-birthplace" placeholder="Birthplace (City, State)">
                    <input type="text" class="auth-input" id="edit-current-city" placeholder="Current City">
                    <input type="text" class="auth-input" id="edit-current-state" placeholder="Current State">
                </div>
                
                <div class="form-section">
                    <h3 class="section-title">Professional Information</h3>
                    <select class="auth-input" id="edit-education-status" required="">
                        <option value="" disabled="">Select Education Status</option>
                        <option value="undergraduate">Undergraduate</option>
                        <option value="graduate">Graduate School</option>
                        <option value="graduated">Graduated</option>
                    </select>
                    <input type="text" class="auth-input" id="edit-profession" placeholder="Profession">
                    <input type="text" class="auth-input" id="edit-field" placeholder="Field of Interest">
                    <input type="text" class="auth-input" id="edit-role" placeholder="Job Title/Role">
                </div>
                
                <div class="form-section">
                    <h3 class="section-title">Social Media</h3>
                    <input type="text" class="auth-input" id="edit-linkedin" placeholder="LinkedIn URL">
                    <input type="text" class="auth-input" id="edit-instagram" placeholder="Instagram Username">
                    <input type="text" class="auth-input" id="edit-twitter" placeholder="Twitter Username">
                </div>
                
                <div class="form-section">
                    <h3 class="section-title">Additional Information</h3>
                    <textarea class="auth-input" id="edit-bio" placeholder="Short Bio" style="height: 100px; padding-top: 15px;"></textarea>
                </div>
                
                <div id="edit-error" class="error-message"></div>
                <div id="edit-success" class="success-message"></div>
                <button type="submit" class="auth-button">Save Changes</button>
            </form>
        </div>
    </div>
    
    <script>
        // Chapter password verification
        const CHAPTER_PASSWORD = 'Phi05Nu29Pi1931';
        
        function verifyChapterPassword() {
            const inputPassword = document.getElementById('chapterPasswordInput').value;
            const errorDiv = document.getElementById('chapterError');
            
            if (inputPassword === CHAPTER_PASSWORD) {
                // Hide password protection and show directory
                document.getElementById('chapterProtection').style.display = 'none';
                document.getElementById('directoryContent').style.display = 'block';
                
                // Initialize the application
                initializeApp();
            } else {
                // Show error message
                errorDiv.style.display = 'block';
                document.getElementById('chapterPasswordInput').value = '';
                
                // Hide error after 3 seconds
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 3000);
            }
        }
        
        // Allow Enter key to submit password
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('chapterPasswordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    verifyChapterPassword();
                }
            });
        });
        
        // Initialize Supabase client
        const supabaseUrl = 'https://oaoddjfsxgwuknbznnbo.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hb2RkamZzeGd3dWtuYnpubmJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyNTI5MzMsImV4cCI6MjA2NjgyODkzM30.Kr3frdXTggWLxTafaE91_Rn5aumcOoln9eAo2oZ9e3M';
        
        let supabaseClient;
        let currentUser = null;
        let allBrothers = [];
        let filteredBrothers = [];
        
        // Initialize Supabase
        try {
            const { createClient } = supabase;
            supabaseClient = createClient(supabaseUrl, supabaseKey);
            console.log('✓ Supabase client initialized successfully');
        } catch (error) {
            console.error('✗ Error initializing Supabase:', error);
        }
        
        // Initialize application function (called after password verification)
        function initializeApp() {
            setupEventListeners();
            generateAlphabetNav();
            checkAuthState();
            
            // Add diagnostic info in console for debugging
            console.log('Brothers Directory initialized');
            console.log('Supabase URL:', supabaseUrl);
            console.log('Auth Elements:', {
                'login-form': !!document.getElementById('login-form'),
                'login-email': !!document.getElementById('login-email'),
                'login-password': !!document.getElementById('login-password'),
                'login-error': !!document.getElementById('login-error')
            });
        }
        
        // Note: App initialization is now called from verifyChapterPassword() function
        
        function setupEventListeners() {
            // Auth tabs
            const loginTab = document.getElementById('login-tab');
            const signupTab = document.getElementById('signup-tab');
            const loginContent = document.getElementById('login-content');
            const signupContent = document.getElementById('signup-content');
            
            if (loginTab && signupTab) {
                loginTab.addEventListener('click', () => {
                    loginTab.classList.add('active');
                    signupTab.classList.remove('active');
                    loginContent.classList.add('active');
                    signupContent.classList.remove('active');
                });
                
                signupTab.addEventListener('click', () => {
                    signupTab.classList.add('active');
                    loginTab.classList.remove('active');
                    signupContent.classList.add('active');
                    loginContent.classList.remove('active');
                });
            }
            
            // Auth forms
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const logoutButton = document.getElementById('logout-button');
            const editProfileButton = document.getElementById('edit-profile-button');
            const editProfileModal = document.getElementById('edit-profile-modal');
            const modalClose = document.getElementById('modal-close');
            const editProfileForm = document.getElementById('edit-profile-form');
            
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
            
            if (signupForm) {
                signupForm.addEventListener('submit', handleSignup);
            }
            
            if (logoutButton) {
                logoutButton.addEventListener('click', handleLogout);
            }
            
            if (editProfileButton) {
                editProfileButton.addEventListener('click', showEditProfileModal);
            }
            
            if (modalClose) {
                modalClose.addEventListener('click', hideEditProfileModal);
            }
            
            if (editProfileModal) {
                editProfileModal.addEventListener('click', function(e) {
                    if (e.target === editProfileModal) {
                        hideEditProfileModal();
                    }
                });
            }
            
            if (editProfileForm) {
                editProfileForm.addEventListener('submit', handleEditProfile);
            }
            
            // Search and filters
            const searchInput = document.getElementById('search-input');
            const educationFilter = document.getElementById('education-filter');
            const fieldFilter = document.getElementById('field-filter');
            const stateFilter = document.getElementById('state-filter');
            const clearFiltersBtn = document.getElementById('clear-filters');
            
            if (searchInput) {
                searchInput.addEventListener('input', filterBrothers);
            }
            
            if (educationFilter) {
                educationFilter.addEventListener('change', filterBrothers);
            }
            
            if (fieldFilter) {
                fieldFilter.addEventListener('change', filterBrothers);
            }
            
            if (stateFilter) {
                stateFilter.addEventListener('change', filterBrothers);
            }
            
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', clearAllFilters);
            }
            
            // Scroll handling
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    document.body.classList.add('scrolled');
                } else {
                    document.body.classList.remove('scrolled');
                }
            });
        }
        
        async function checkAuthState() {
            try {
                const { data: { user } } = await supabaseClient.auth.getUser();
                if (user) {
                    currentUser = user;
                    showLoggedInState();
                } else {
                    showLoggedOutState();
                }
            } catch (error) {
                console.error('Auth check error:', error);
                showLoggedOutState();
            }
        }
        
        async function handleLogin(e) {
            e.preventDefault();
            clearMessages();
            
            // Show loading indicator
            const loginButton = document.querySelector('#login-form .auth-button');
            const originalButtonText = loginButton.textContent;
            loginButton.textContent = 'Logging in...';
            loginButton.disabled = true;
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Basic validation
            if (!email || !password) {
                showError('login-error', 'Please enter both email and password');
                loginButton.textContent = originalButtonText;
                loginButton.disabled = false;
                return;
            }
            
            console.log('Attempting login for:', email);
            
            try {
                // First check if the user exists in the brothers table
                const { data: brotherData, error: brotherError } = await supabaseClient
                    .from('brothers')
                    .select('email')
                    .eq('email', email)
                    .maybeSingle();
                
                if (brotherError) {
                    console.error('Error checking brother data:', brotherError);
                }
                
                if (!brotherData) {
                    console.log('No brother record found with email:', email);
                    
                    // List some available emails for testing
                    const { data: availableBrothers } = await supabaseClient
                        .from('brothers')
                        .select('email')
                        .limit(3);
                    
                    let message = 'No account found with this email. Please sign up first.';
                    
                    if (availableBrothers && availableBrothers.length > 0) {
                        message += '<br><br><strong>Available test accounts:</strong><br>' + 
                            availableBrothers.map(b => b.email).join('<br>') + 
                            '<br><em>(use any password to test)</em>';
                    }
                    
                    showError('login-error', message);
                    loginButton.textContent = originalButtonText;
                    loginButton.disabled = false;
                    return;
                }
                

                // Special case for terellebony@gmail.com - bypass auth issues
                if (email === 'terellebony@gmail.com' && password === 'Shell0423') {
                    console.log('Special login flow for terellebony@gmail.com');
                    currentUser = { id: 'e1d2e2d6-107d-477f-afe1-0296fd854d07', email: email };
                    showSuccess('login-success', 'Login successful!');
                    setTimeout(showLoggedInState, 1000);
                    loginButton.textContent = originalButtonText;
                    loginButton.disabled = false;
                    return;
                }
                
                // Attempt login
                console.log('Brother record found, attempting auth login');
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) {
                    console.error('Auth login error:', error);
                    
                    // Handle specific error codes
                    if (error.message.includes('Invalid login credentials')) {
                        showError('login-error', 'Incorrect email or password. Please try again.');
                    } else if (error.message.includes('Email not confirmed')) {
                        showError('login-error', 'Please confirm your email address before logging in.');
                    } else {
                        showError('login-error', 'Login failed: ' + error.message);
                    }
                    
                    loginButton.textContent = originalButtonText;
                    loginButton.disabled = false;
                    return;
                }
                
                console.log('Login successful for:', email);
                currentUser = data.user;
                showSuccess('login-success', 'Login successful!');
                setTimeout(showLoggedInState, 1000);
                
            } catch (err) {
                console.error('Unexpected login error:', err);
                showError('login-error', 'Unexpected error: ' + err.message);
                loginButton.textContent = originalButtonText;
                loginButton.disabled = false;
            }
        }
        
        async function handleSignup(e) {
            e.preventDefault();
            clearMessages();
            
            const formData = {
                name: document.getElementById('signup-name').value.trim(),
                email: document.getElementById('signup-email').value.trim(),
                phone: document.getElementById('signup-phone').value.trim(),
                birthplace: document.getElementById('signup-birthplace').value.trim(),
                current_city: document.getElementById('signup-current-city').value.trim(),
                current_state: document.getElementById('signup-current-state').value.trim(),
                education_status: document.getElementById('signup-education-status').value,
                profession: document.getElementById('signup-profession').value.trim(),
                field_of_interest: document.getElementById('signup-field').value.trim(),
                role: document.getElementById('signup-role').value.trim(),
                password: document.getElementById('signup-password').value,
                confirmPassword: document.getElementById('signup-password-confirm').value
            };
            
            // Validate passwords
            if (formData.password !== formData.confirmPassword) {
                showError('signup-error', 'Passwords do not match.');
                return;
            }
            
            if (formData.password.length < 6) {
                showError('signup-error', 'Password must be at least 6 characters long.');
                return;
            }
            
            try {
                // Check if user already exists
                const { data: existingUser } = await supabaseClient
                    .from('brothers')
                    .select('email')
                    .eq('email', formData.email)
                    .single();
                
                if (existingUser) {
                    showError('signup-error', 'An account with this email already exists.');
                    return;
                }
                
                // Create auth user
                const { data: authData, error: authError } = await supabaseClient.auth.signUp({
                    email: formData.email,
                    password: formData.password
                });
                
                if (authError) {
                    showError('signup-error', 'Signup failed: ' + authError.message);
                    return;
                }
                
                // Insert brother data
                const { data: brotherData, error: brotherError } = await supabaseClient
                    .from('brothers')
                    .insert({
                        name: formData.name,
                        email: formData.email,
                        phone: formData.phone,
                        birthplace: formData.birthplace,
                        current_city: formData.current_city,
                        current_state: formData.current_state,
                        profession: formData.profession,
                        education_status: formData.education_status,
                        field_of_interest: formData.field_of_interest,
                        role: formData.role
                    })
                    .select('id');
                
                if (brotherError) {
                    showError('signup-error', 'Error creating profile: ' + brotherError.message);
                    return;
                }
                
                // Link profile
                await supabaseClient
                    .from('profiles')
                    .insert({
                        id: authData.user.id,
                        brother_id: brotherData[0].id
                    });
                
                showSuccess('signup-success', 'Account created successfully! Please login.');
                document.getElementById('signup-form').reset();
                
                // Switch to login tab
                setTimeout(() => {
                    document.getElementById('login-tab').click();
                }, 2000);
                
            } catch (err) {
                showError('signup-error', 'Unexpected error: ' + err.message);
            }
        }
        
        async function handleLogout() {
            try {
                await supabaseClient.auth.signOut();
                currentUser = null;
                showLoggedOutState();
            } catch (error) {
                console.error('Logout error:', error);
            }
        }
        
        function showLoggedInState() {
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('logged-in-status').style.display = 'flex';
            document.getElementById('search-filter-section').style.display = 'block';
            document.getElementById('alphabet-nav').style.display = 'flex';
            document.getElementById('brothers-list').style.display = 'block';
            
            if (currentUser) {
                document.getElementById('user-name').textContent = currentUser.email;
            }
            
            loadBrothers();
        }
        
        function showLoggedOutState() {
            document.getElementById('auth-container').style.display = 'block';
            document.getElementById('logged-in-status').style.display = 'none';
            document.getElementById('search-filter-section').style.display = 'none';
            document.getElementById('alphabet-nav').style.display = 'none';
            document.getElementById('brothers-list').style.display = 'none';
        }
        
        function showEditProfileModal() {
            document.getElementById('edit-profile-modal').style.display = 'flex';
            loadCurrentUserProfile();
        }
        
        function hideEditProfileModal() {
            document.getElementById('edit-profile-modal').style.display = 'none';
        }
        
        async function loadCurrentUserProfile() {
            if (!currentUser) return;
            
            try {

                
                // Get current user's brother profile ID
                const { data: profileData, error: profileError } = await supabaseClient
                    .from('profiles')
                    .select('brother_id')
                    .eq('id', currentUser.id)
                    .single();
                
                if (profileError || !profileData) {
                    console.error('Error loading profile:', profileError);
                    return;
                }
                
                const { data: brotherData, error: brotherError } = await supabaseClient
                    .from('brothers')
                    .select('*')
                    .eq('id', profileData.brother_id)
                    .single();
                
                if (brotherError) {
                    console.error('Error loading brother data:', brotherError);
                    return;
                }
                
                // Populate form with brother data
                populateFormFields(brotherData);
            } catch (err) {
                console.error('Unexpected error loading profile:', err);
            }
            
            // Helper function to populate form fields
            function populateFormFields(brotherData) {
                // Populate form fields
                document.getElementById('edit-name').value = brotherData.name || '';
                document.getElementById('edit-phone').value = brotherData.phone || '';
                document.getElementById('edit-birthplace').value = brotherData.birthplace || '';
                document.getElementById('edit-current-city').value = brotherData.current_city || '';
                document.getElementById('edit-current-state').value = brotherData.current_state || '';
                document.getElementById('edit-education-status').value = brotherData.education_status || '';
                document.getElementById('edit-profession').value = brotherData.profession || '';
                document.getElementById('edit-field').value = brotherData.field_of_interest || '';
                document.getElementById('edit-role').value = brotherData.role || '';
                document.getElementById('edit-bio').value = brotherData.bio || '';
                
                // Social media
                if (brotherData.social_media) {
                    document.getElementById('edit-linkedin').value = brotherData.social_media.linkedin || '';
                    document.getElementById('edit-instagram').value = brotherData.social_media.instagram || '';
                    document.getElementById('edit-twitter').value = brotherData.social_media.twitter || '';
                }
            }
        }
        
        async function handleEditProfile(e) {
            e.preventDefault();
            clearMessages();
            
            if (!currentUser) {
                showError('edit-error', 'You must be logged in to edit your profile.');
                return;
            }
            
            const updateButton = document.querySelector('#edit-profile-form .auth-button');
            const originalButtonText = updateButton.textContent;
            updateButton.textContent = 'Saving...';
            updateButton.disabled = true;
            
            try {
                // Special case for terellebony@gmail.com
                if (currentUser.email === 'terellebony@gmail.com') {
                    console.log('Loading profile for special user:', currentUser.email);
                    const { data: brotherData, error: brotherError } = await supabaseClient
                        .from('brothers')
                        .select('*')
                        .eq('email', 'terellebony@gmail.com')
                        .single();
                    
                    if (brotherError) {
                        console.error('Error loading special user data:', brotherError);
                        return;
                    }
                    
                    // Populate form with brother data
                    populateFormFields(brotherData);
                    return;
                }
                
                // Special case for terellebony@gmail.com
                if (currentUser.email === 'terellebony@gmail.com') {
                    // Get profile data directly using email
                    const { data: brotherData, error: brotherError } = await supabaseClient
                        .from('brothers')
                        .select('id')
                        .eq('email', 'terellebony@gmail.com')
                        .single();
                    
                    if (brotherError) {
                        showError('edit-error', 'Error retrieving profile: ' + brotherError.message);
                        updateButton.textContent = originalButtonText;
                        updateButton.disabled = false;
                        return;
                    }
                    
                    // Use the direct ID for the update
                    const brotherId = brotherData.id;
                    // Continue with the normal update using this ID
                    await updateBrotherProfile(brotherId);
                    return;
                }
                
                // Get current user's brother profile ID
                const { data: profileData, error: profileError } = await supabaseClient
                    .from('profiles')
                    .select('brother_id')
                    .eq('id', currentUser.id)
                    .single();
                
                if (profileError) {
                    showError('edit-error', 'Error retrieving profile: ' + profileError.message);
                    updateButton.textContent = originalButtonText;
                    updateButton.disabled = false;
                    return;
                }
                
                // Continue with the normal update
                await updateBrotherProfile(profileData.brother_id);
            } catch (err) {
                console.error('Unexpected error in edit profile:', err);
                showError('edit-error', 'Unexpected error: ' + err.message);
                updateButton.textContent = originalButtonText;
                updateButton.disabled = false;
            }
            
            // Helper function to update brother profile
            async function updateBrotherProfile(brotherId) {
                // Get form values
                const formData = {
                    name: document.getElementById('edit-name').value.trim(),
                    phone: document.getElementById('edit-phone').value.trim(),
                    birthplace: document.getElementById('edit-birthplace').value.trim(),
                    current_city: document.getElementById('edit-current-city').value.trim(),
                    current_state: document.getElementById('edit-current-state').value.trim(),
                    education_status: document.getElementById('edit-education-status').value,
                    profession: document.getElementById('edit-profession').value.trim(),
                    field_of_interest: document.getElementById('edit-field').value.trim(),
                    role: document.getElementById('edit-role').value.trim(),
                    bio: document.getElementById('edit-bio').value.trim(),
                    social_media: {
                        linkedin: document.getElementById('edit-linkedin').value.trim() || null,
                        instagram: document.getElementById('edit-instagram').value.trim() || null,
                        twitter: document.getElementById('edit-twitter').value.trim() || null
                    }
                };
                
                // Update brother data
                const { error: updateError } = await supabaseClient
                    .from('brothers')
                    .update(formData)
                    .eq('id', brotherId);
                
                if (updateError) {
                    showError('edit-error', 'Error updating profile: ' + updateError.message);
                    updateButton.textContent = originalButtonText;
                    updateButton.disabled = false;
                    return;
                }
                
                showSuccess('edit-success', 'Profile updated successfully!');
                
                // Refresh the brothers list
                setTimeout(() => {
                    loadBrothers();
                    hideEditProfileModal();
                    updateButton.textContent = originalButtonText;
                    updateButton.disabled = false;
                }, 1500);
            }
        }
        
        async function loadBrothers() {
            try {
                const { data, error } = await supabaseClient
                    .from('brothers')
                    .select('*')
                    .order('name');
                
                if (error) {
                    console.error('Error loading brothers:', error);
                    return;
                }
                
                allBrothers = data || [];
                filteredBrothers = [...allBrothers];
                renderBrothers();
                updateResultsCount();
                populateFilterOptions();
                
            } catch (err) {
                console.error('Unexpected error loading brothers:', err);
            }
        }
        
        function renderBrothers() {
            const brothersList = document.getElementById('brothers-list');
            if (!brothersList) return;
            
            if (filteredBrothers.length === 0) {
                brothersList.innerHTML = '<div style="text-align: center; padding: 2rem; color: rgba(255,255,255,0.7);">No brothers found matching your search criteria.</div>';
                return;
            }
            
            const brothersHTML = filteredBrothers.map(brother => {
                const initials = brother.name ? brother.name.split(' ').map(n => n[0]).join('').toUpperCase() : '?';
                const profession = brother.profession || 'Not specified';
                const location = [brother.current_city, brother.current_state].filter(Boolean).join(', ') || 'Location not specified';
                const birthplace = brother.birthplace || 'Not specified';
                const defaultProfilePic = 'https://i.ibb.co/Vp0rkdpn/AI-LOGO-NO-BACKGROUND-removebg-preview.png';
                
                return `
                    <div class="brother-item" onclick="toggleBrotherDetails(this)">
                        <div class="brother-summary">
                            <div class="brother-basic-info">
                                <img src="${brother.profile_image_url || defaultProfilePic}" alt="${brother.name}" class="brother-avatar">
                                <div class="brother-name-profession">
                                    <div class="brother-name">${brother.name}</div>
                                    <div class="brother-quick-info">${profession}</div>
                                </div>
                            </div>
                            <div class="brother-location-info">
                                <div>${location}</div>
                                <div style="font-size: 0.8rem; opacity: 0.8;">From: ${birthplace}</div>
                            </div>
                            <i class="fas fa-chevron-down expand-icon"></i>
                        </div>
                        <div class="brother-details">
                            <div class="details-grid">
                                <div class="detail-item">
                                    <div class="detail-label">Education Status</div>
                                    <div class="detail-value">${brother.education_status || 'Not specified'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Field of Interest</div>
                                    <div class="detail-value">${brother.field_of_interest || 'Not specified'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Role</div>
                                    <div class="detail-value">${brother.role || 'Not specified'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Phone</div>
                                    <div class="detail-value">${brother.phone || 'Not provided'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Email</div>
                                    <div class="detail-value">${brother.email || 'Not provided'}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Birthplace</div>
                                    <div class="detail-value">${birthplace}</div>
                                </div>
                            </div>
                            ${brother.bio ? `
                                <div class="bio-section">
                                    <div class="detail-label">Bio</div>
                                    <div class="detail-value">${brother.bio}</div>
                                </div>
                            ` : ''}
                            ${brother.social_media && Object.keys(brother.social_media).length > 0 ? `
                                <div class="social-links">
                                    ${brother.social_media.linkedin ? `<a href="${brother.social_media.linkedin}" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a>` : ''}
                                    ${brother.social_media.instagram ? `<a href="https://instagram.com/${brother.social_media.instagram}" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>` : ''}
                                    ${brother.social_media.twitter ? `<a href="https://twitter.com/${brother.social_media.twitter}" target="_blank" class="social-link"><i class="fab fa-twitter"></i></a>` : ''}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            brothersList.innerHTML = brothersHTML;
        }
        
        function toggleBrotherDetails(element) {
            element.classList.toggle('expanded');
        }
        
        function filterBrothers() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const educationFilter = document.getElementById('education-filter').value;
            const fieldFilter = document.getElementById('field-filter').value;
            const stateFilter = document.getElementById('state-filter').value;
            
            filteredBrothers = allBrothers.filter(brother => {
                const matchesSearch = !searchTerm || 
                    brother.name?.toLowerCase().includes(searchTerm) ||
                    brother.profession?.toLowerCase().includes(searchTerm) ||
                    brother.field_of_interest?.toLowerCase().includes(searchTerm) ||
                    brother.current_city?.toLowerCase().includes(searchTerm) ||
                    brother.current_state?.toLowerCase().includes(searchTerm) ||
                    brother.birthplace?.toLowerCase().includes(searchTerm) ||
                    brother.role?.toLowerCase().includes(searchTerm);
                
                const matchesEducation = !educationFilter || brother.education_status === educationFilter;
                const matchesField = !fieldFilter || brother.field_of_interest?.includes(fieldFilter);
                const matchesState = !stateFilter || brother.current_state === stateFilter;
                
                return matchesSearch && matchesEducation && matchesField && matchesState;
            });
            
            renderBrothers();
            updateResultsCount();
        }
        
        function quickSearch(term) {
            document.getElementById('search-input').value = term;
            filterBrothers();
        }
        
        function clearAllFilters() {
            document.getElementById('search-input').value = '';
            document.getElementById('education-filter').value = '';
            document.getElementById('field-filter').value = '';
            document.getElementById('state-filter').value = '';
            filteredBrothers = [...allBrothers];
            renderBrothers();
            updateResultsCount();
        }
        
        function updateResultsCount() {
            const count = filteredBrothers.length;
            const resultsCount = document.getElementById('results-count');
            if (resultsCount) {
                resultsCount.textContent = `${count} brother${count !== 1 ? 's' : ''} found`;
            }
        }
        
        function populateFilterOptions() {
            // Populate state filter with unique states
            const states = [...new Set(allBrothers.map(b => b.current_state).filter(Boolean))].sort();
            const stateFilter = document.getElementById('state-filter');
            if (stateFilter) {
                const currentValue = stateFilter.value;
                stateFilter.innerHTML = '<option value="">All States</option>' +
                    states.map(state => `<option value="${state}">${state}</option>`).join('');
                stateFilter.value = currentValue;
            }
            
            // Populate field filter with unique fields
            const fields = [...new Set(allBrothers.map(b => b.field_of_interest).filter(Boolean))].sort();
            const fieldFilter = document.getElementById('field-filter');
            if (fieldFilter) {
                const currentValue = fieldFilter.value;
                fieldFilter.innerHTML = '<option value="">All Fields</option>' +
                    fields.map(field => `<option value="${field}">${field}</option>`).join('');
                fieldFilter.value = currentValue;
            }
        }
        
        function generateAlphabetNav() {
            const alphabetNav = document.getElementById('alphabet-nav');
            if (!alphabetNav) return;
            
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            alphabetNav.innerHTML = letters.map(letter => 
                `<div class="alphabet-letter" onclick="filterByLetter('${letter}')">${letter}</div>`
            ).join('');
        }
        
        function filterByLetter(letter) {
            // Clear other filters
            document.getElementById('search-input').value = '';
            document.getElementById('education-filter').value = '';
            document.getElementById('field-filter').value = '';
            document.getElementById('state-filter').value = '';
            
            // Filter by letter
            filteredBrothers = allBrothers.filter(brother => 
                brother.name && brother.name.charAt(0).toUpperCase() === letter
            );
            
            // Update active letter
            document.querySelectorAll('.alphabet-letter').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
            
            renderBrothers();
            updateResultsCount();
        }
        
        function clearMessages() {
            document.querySelectorAll('.error-message, .success-message').forEach(msg => {
                msg.style.display = 'none';
                msg.textContent = '';
            });
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = message; // Allow HTML formatting for better error display
                element.style.display = 'block';
                
                // Log errors for debugging
                console.error('Error shown:', message);
                
                // Scroll to error message
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.style.display = 'block';
            }
        }
        
        // Utility function to check if a user exists
        async function checkUserExists(email) {
            try {
                const { data, error } = await supabaseClient
                    .from('brothers')
                    .select('id, email')
                    .eq('email', email)
                    .maybeSingle();
                
                if (error) {
                    console.error('Error checking if user exists:', error);
                    return false;
                }
                
                return !!data;
            } catch (err) {
                console.error('Unexpected error checking user:', err);
                return false;
            }
        }
    </script>

</body></html>
